window.addEventListener&&window.requestAnimationFrame&&document.getElementsByClassName&&window.addEventListener("load",function(){var r,e,s=document.getElementsByClassName("progressive replace");(window.addEventListener("scroll",t,!1),window.addEventListener("resize",t,!1),MutationObserver)&&new MutationObserver(function(){s.length!==r&&n()}).observe(document.body,{subtree:!0,childList:!0,attributes:!0,characterData:!0});function t(){e=e||setTimeout(function(){e=null,n()},300)}function n(){s.length&&requestAnimationFrame(function(){for(var e,t,n=window.pageYOffset,a=n+window.innerHeight,i=0;i<s.length;)n<(t=n+(e=s[i].getBoundingClientRect()).top)+e.height&&t<a?(o(s[i]),s[i].classList.remove("replace")):i++;r=s.length})}function o(n){var e=n&&(n.getAttribute("data-href")||n.href);if(e){var t=new Image;n.dataset&&(t.srcset=n.dataset.srcset||"",t.sizes=n.dataset.sizes||""),t.src=e,t.className="reveal",t.complete?a():t.onload=a}function a(){requestAnimationFrame(function(){e===n.href&&(n.style.cursor="default",n.addEventListener("click",function(e){e.preventDefault()},!1)),n.appendChild(t).addEventListener("animationend",function(e){var t=n.querySelector&&n.querySelector("img.preview");t&&(e.target.alt=t.alt||"",n.removeChild(t),e.target.classList.remove("reveal"))})})}}n()},!1);